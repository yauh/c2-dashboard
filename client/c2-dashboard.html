<head>
    <title>c2-dashboard</title>
</head>

<body>
</body>

<template name="main">
    {{> navigation }}
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                {{> yield}}
            </div>
        </div>
        <div class="row">
            <footer>
                Made by <a href="http://yauh.de">Stephan Hochhaus</a> -- &copy; 2014.
            </footer>
        </div>
    </div>
    <!-- /.container -->


</template>

<template name="navigation">
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{{pathFor 'home'}}">
                    <img src="logo_negative.png" alt="Home of C2-Dashboard">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->

            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    {{#if currentUser}}
                    <li>
                        <a href="{{pathFor 'dashboard'}}">My Dashboard</a>
                    </li>
                    <li>
                        <a href="{{pathFor 'logcard'}}">My Logcard</a>
                    </li>
                    {{/if}}
                    <li>
                        <a href="{{pathFor 'about'}}">About C2-Dashboard</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    {{> loginButtons }} <!-- here -->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>
</template>

<template name="about">
    <h2>About C2-Dashboard</h2>

    <p>C2-Dashboard is a tool that lets you view your rowing logs from a Concept2 ergometer on the web.</p>
    <p>If you own a logcard and work out on a Concept 2 Rowing Machine (Ergometer) you can create an export of all your data using a tool such as <a href="http://www.concept2.com/service/software/concept2-utility">the Concept2 Utility</a>.<br />
        The resulting CSV file can be uploaded and will be visualized.</p>
    <p>C2-Dashboard is a personal project and does not intend to become an alternative to any of the existing solutions such as <a href="http://log.concept2.com/">the Concept2 Online Log</a> or <a href="http://runkeeper.com/">RunKeeper</a>.</p>
</template>

<template name="home">
    <h2>Home of the C2-Dashboard</h2>
    <p>Visualize your own C2 logcard data.<br>All you need is to sign up and upload your C2 Logcard data.</p>
    {{> publicCharts }}
</template>

<template name="publicCharts">
    <div id="totalTimesChart" style="width:100%; height:400px;">{{publicChart}}</div>
    <p>Some anonymous statistics will eventually go here.</p>
</template>


<template name="uploadCsv">
    <h3>Import logcard data from csv</h3>
    <input type="file" id="files" name="files[]" multiple/>
    <output id="list"></output>
</template>

<template name="logcard">
    <h2>Logcard entries</h2>

    <div>
        {{> uploadCsv }}
    </div>
    <!-- Button trigger modal -->

    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Delete workout</h4>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this workout?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="deleteWorkout" data-dismiss="modal">Delete</button>
                    <button type="button" class="btn btn-cancel" data-dismiss="modal">Keep Workout</button>
                </div>
            </div>
        </div>
    </div>
    <div>
        <table border="1">
            <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Time of Day</th>
                <th>Workout Description</th>
                <th>Total Time</th>
                <th>Total Meters</th>
                <th>Average SPM</th>
                <th>Average HR</th>
                <th>Pace /500m</th>
                <th>Cals/hour</th>
                <th>Avg Watts</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            {{#each workout}}
            {{> rowdetails }}
            {{/each}}
            </tbody>
        </table>
    </div>

</template>

<template name="rowdetails">
    <tr>
        <td>{{name}}</td>
        <td>{{date}}</td>
        <td>{{timeofday}}</td>
        <td>{{desc}}</td>
        <td>{{totalTime}}</td>
        <td>{{totalMeters}}</td>
        <td>{{totalSPM}}</td>
        <td>{{totalHR}}</td>
        <td>{{calcPace500}}</td>
        <td>{{calcCalH}}</td>
        <td>{{calcWatt}}</td>
        <td>
            <button class="btn btn-default" id="details" data-id="{{_id}}">Details</button>
            <button class="btn btn-danger delete" data-id="{{_id}}">Delete</button>
        </td>
    </tr>
</template>

<template name="dashboard">
    <h2>Dashboard data view</h2>
    <p>Sign up to visualize your own C2 logcard data.</p>
    {{> personalCharts }}
</template>

<template name="personalCharts">
    <div id="totalTimesChart" style="width:100%; height:400px;">{{myChart}}</div>
</template>